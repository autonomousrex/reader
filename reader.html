<html>
	<head>

		<meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1">


		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">


		<link rel="stylesheet" href="reader.css">

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.min.js" integrity="sha384-cn7l7gDp0eyniUwwAZgrzD06kc/tftFf19TOAs2zVinnD/C7E91j9yyk5//jjpt/" crossorigin="anonymous"></script>

		<script src='https://unpkg.com/tesseract.js@v2.1.0/dist/tesseract.min.js'></script>

	</head>


	<body>


		<main>
			<div class="container col-xxl-8 px-4 py-5">
				
				<div class="row flex-lg-row-reverse align-items-center g-5 py-5">
					<input type="file" id="image-picker" accept="image/*">
				</div>

				<div class="row flex-lg-row-reverse align-items-center g-5 py-5">
					<div class="loader" id="loader" style="display:none">Loading...</div>
					<div id="ocr-contents"></div>
				</div>
			</div>
		</main>


		<script>
		  const fileInput = document.getElementById('image-picker');

		  fileInput.addEventListener('change', (e) => doSomethingWithFiles(e.target.files));


		  function doSomethingWithFiles(files) {

		  	document.getElementById('loader').style.display = "block";


			const worker = Tesseract.createWorker({
      			logger: m => console.log(m)
    		});
    		
    		Tesseract.setLogging(true);

			(async () => {
			  await worker.load();
			  await worker.loadLanguage('eng');
			  await worker.initialize('eng');
			  const { data: { text } } = await worker.recognize(files[0]);
			  console.log(text);
			  document.getElementById('ocr-contents').innerHTML = text;
			  await worker.terminate();
			  document.getElementById('loader').style.display = "none";
			})();


		  }

		</script>


	</body>
</html>